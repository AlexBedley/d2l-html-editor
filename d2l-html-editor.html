<link rel="import" href="../polymer/polymer.html">
<link rel="import" href="../d2l-inputs/d2l-input-shared-styles.html">

<link rel="import" href="tinymce-import.html">
<link rel="import" href="d2l-insertstuff-plugin.html">
<link rel="import" href="d2l-insertstuff-styles.html">
<link rel="import" href="d2l-image-plugin.html">
<link rel="import" href="d2l-textstylerollup-plugin.html">
<link rel="import" href="d2l-formatrollup-plugin.html">
<link rel="import" href="d2l-insertrollup-plugin.html">
<link rel="import" href="d2l-link-plugin.html">
<link rel="import" href="d2l-equation-editor-plugin.html">
<link rel="import" href="d2l-code-plugin.html">
<link rel="import" href="d2l-replacestring-plugin.html">
<link rel="import" href="d2l-fontfamily-plugin.html">
<link rel="import" href="d2l-attributes-plugin.html">
<link rel="import" href="d2l-preview-plugin.html">
<link rel="import" href="d2l-xsplconverter-plugin.html">
<link rel="import" href="d2l-filter-plugin.html">
<link rel="import" href="d2l-placeholder-plugin.html">
<link rel="import" href="d2l-fullpage-plugin.html">
<link rel="import" href="d2l-emoticons-plugin.html">
<link rel="stylesheet" href="d2l-icons.css">
<link rel="import" href="d2l-html-editor-icons-styles.html">
<link rel="import" href="d2l-html-editor-skin-styles.html">
<link rel="import" href="d2l-html-editor-content-styles.html">
<link rel="stylesheet" href="d2l-equation-editor.css">
<link rel="stylesheet" href="d2l-placeholder.css">
<link rel="stylesheet" href="d2l-powerpaste-spinner.css">
<link rel="stylesheet" href="d2l-insertstuff.css">

<!--<link rel="import" href="./vui-input-styles.html">-->

<!--
An element providing a solution to no problem in particular.

Example:

		<d2l-html-editor></d2l-html-editor>

@demo
-->
<dom-module id="d2l-html-editor">

	<template>

		<style include="d2l-input-styles"></style>
		<style include="d2l-insertstuff-styles"></style>
		<style include="d2l-html-editor-icons"></style>
		<style include="d2l-html-editor-skin"></style>
		<style include="d2l-html-editor-content"></style>

		<style>
			:host {
				display: block;
				position: relative;
			}

			:host ::slotted(.toolbar) {
				position: absolute;
				top: -2.9rem;
				z-index: 1001;
				display: inline-block;
				right: 0;
			}

			:host-context([dir='rtl']) ::slotted(.toolbar) {
				left: 0;
				right: inherit;
			}

			:host(:dir(rtl)) ::slotted(.toolbar) {
				left: 0;
				right: inherit;
			}

			.d2l-richtext-editor-container {
				@apply --d2l-input;
				@apply --d2l-input-textarea;
				border-color: transparent;
				box-shadow: none;
				border-radius: 0;
				transition-property: none;
			}

			.d2l-richtext-editor-container:hover,
			.d2l-richtext-editor-container:focus,
			.d2l-richtext-editor-container:active,
			.d2l-richtext-editor-container.html-editor-container-hover {
				@apply --d2l-input-hover-focus;
			}

			:host(.invalid) > .d2l-richtext-editor-container {
				@apply --d2l-input-invalid;
			}

			.d2l-richtext-editor-container > p:last-of-type {
			  margin-bottom: 0;
			}

			.d2l-richtext-editor-container > p:first-of-type {
			  margin-top: 0;
			}

			.d2l-richtext-editor-container * {
			  max-width: 100%;
			}
			/* .d2l-richtext-editor-container p:only-of-type {
			  margin: 0;
			} */

			:host(.invalid) > .d2l-richtext-editor-container:hover,
			:host(.invalid) > .d2l-richtext-editor-container:focus {
				@apply --d2l-input-invalid;
			}

			@media (max-width: 615px), (max-device-width: 960px) {
				.d2l-richtext-editor-container {
					height: 3.9rem;
				}
			}

		</style>
		<div id="[[editorId]]-toolbar" class="toolbar"></div>
		<div id="[[editorId]]" class="d2l-richtext-editor-container">
			<slot></slot>
		</div>


	</template>

</dom-module>
<script type="text/javascript" src="d2l-html-editor-bundled.js" ></script>
